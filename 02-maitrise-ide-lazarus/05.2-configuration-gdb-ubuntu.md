üîù Retour au [Sommaire](/SOMMAIRE.md)

# 2.5.2 Configuration GDB sur Ubuntu

## Introduction : L'avantage Linux

Bonne nouvelle ! Configurer GDB sur Ubuntu est beaucoup plus simple que sur Windows. GDB est natif sur Linux, il fait partie de l'√©cosyst√®me GNU depuis le d√©but. Ubuntu, comme toutes les distributions Linux, est con√ßu pour le d√©veloppement, et GDB s'y int√®gre naturellement.

**Pourquoi c'est plus simple sur Ubuntu ?**
- üêß GDB est natif sur Linux
- üì¶ Installation en une commande via APT
- üîß Pas de probl√®mes de chemins ou d'antivirus
- üöÄ Performance optimale
- üìù Configuration minimale requise

## V√©rifier la pr√©sence de GDB

### V√©rification rapide

Ouvrez un terminal (`Ctrl+Alt+T`) et tapez :

```bash
gdb --version
```

**R√©sultat attendu :**
```
GNU gdb (Ubuntu 12.1-0ubuntu1~22.04) 12.1
Copyright (C) 2022 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later
This is free software: you are free to change and redistribute it.
```

Si GDB est absent, vous verrez :
```
Command 'gdb' not found, but can be installed with:
sudo apt install gdb
```

### Localisation de GDB

Pour conna√Ætre l'emplacement exact :

```bash
which gdb
# R√©sultat typique : /usr/bin/gdb

# Pour plus de d√©tails
whereis gdb
# R√©sultat : gdb: /usr/bin/gdb /usr/share/man/man1/gdb.1.gz
```

## Installation de GDB

### Installation standard

Si GDB n'est pas install√© :

```bash
# Mettre √† jour les paquets
sudo apt update

# Installer GDB
sudo apt install gdb

# V√©rifier l'installation
gdb --version
```

### Installation compl√®te pour le d√©veloppement

Pour une configuration optimale avec tous les outils :

```bash
# Package de d√©veloppement complet
sudo apt install build-essential gdb valgrind strace ltrace

# Explication des outils :
# build-essential : gcc, g++, make, etc.
# gdb : Le d√©bogueur
# valgrind : D√©tection fuites m√©moire
# strace : Trace des appels syst√®me
# ltrace : Trace des appels de biblioth√®ques
```

### Installation pour Lazarus/FreePascal

Configuration sp√©cifique pour le d√©veloppement Pascal :

```bash
# GDB et outils Pascal
sudo apt install gdb fp-compiler lazarus

# Biblioth√®ques de d√©bogage suppl√©mentaires
sudo apt install libc6-dbg libgtk-3-0-dbg

# Pour le d√©veloppement 32-bit sur syst√®me 64-bit
sudo apt install gcc-multilib g++-multilib gdb-multiarch
```

## Configuration syst√®me pour GDB

### Permissions et s√©curit√©

#### Probl√®me ptrace_scope

Ubuntu moderne restreint ptrace pour la s√©curit√©. Cela peut emp√™cher GDB d'attacher des processus.

**V√©rifier le statut :**
```bash
cat /proc/sys/kernel/yama/ptrace_scope
# 0 = Pas de restriction (classique)
# 1 = Restreint (d√©faut Ubuntu)
# 2 = Admin seulement
# 3 = D√©sactiv√©
```

**Solution temporaire (jusqu'au red√©marrage) :**
```bash
echo 0 | sudo tee /proc/sys/kernel/yama/ptrace_scope
```

**Solution permanente :**
```bash
# √âditer le fichier de configuration
sudo nano /etc/sysctl.d/10-ptrace.conf

# Changer la ligne :
kernel.yama.ptrace_scope = 1
# En :
kernel.yama.ptrace_scope = 0

# Appliquer les changements
sudo sysctl -p /etc/sysctl.d/10-ptrace.conf
```

### Configuration des core dumps

Les core dumps sont utiles pour d√©boguer les crashes :

```bash
# V√©rifier la limite actuelle
ulimit -c
# 0 = Pas de core dump

# Activer les core dumps
ulimit -c unlimited

# Pour rendre permanent (ajouter √† ~/.bashrc)
echo "ulimit -c unlimited" >> ~/.bashrc

# Configurer l'emplacement des core dumps
sudo nano /etc/sysctl.conf
# Ajouter :
kernel.core_pattern = /tmp/core-%e-%p-%t

# Appliquer
sudo sysctl -p
```

## Configuration dans Lazarus

### D√©tection automatique

Lazarus d√©tecte g√©n√©ralement GDB automatiquement sur Ubuntu. V√©rifiez dans :

**Menu : Outils ‚Üí Options ‚Üí D√©bogueur**

```
‚îå‚îÄ Options du D√©bogueur ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Type de d√©bogueur : [GNU debugger (gdb)    ‚ñº] ‚îÇ
‚îÇ                                                 ‚îÇ
‚îÇ Chemin vers gdb:                               ‚îÇ
‚îÇ [/usr/bin/gdb                              ]   ‚îÇ
‚îÇ [Parcourir...]                                 ‚îÇ
‚îÇ                                                 ‚îÇ
‚îÇ ‚úì D√©bogueur d√©tect√© et fonctionnel            ‚îÇ
‚îÇ                                                 ‚îÇ
‚îÇ Version d√©tect√©e : GNU gdb 12.1               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Configuration de base

#### Onglet "G√©n√©ral"

```
Options g√©n√©rales :
‚îú‚îÄ‚îÄ Timeout de d√©marrage : [15] secondes
‚îú‚îÄ‚îÄ ‚òë Arr√™ter sur les exceptions
‚îú‚îÄ‚îÄ ‚òë R√©initialiser apr√®s chaque run
‚îú‚îÄ‚îÄ ‚òê D√©sactiver LoadSymbolsForLibraries
‚îú‚îÄ‚îÄ Working directory : [$(ProjPath)]
‚îî‚îÄ‚îÄ Encodage : [UTF-8]
```

**üí° Astuce Ubuntu** : Le timeout peut √™tre plus court que sur Windows (15s au lieu de 30s).

#### Onglet "Signals"

Configuration des signaux Unix :

```
Gestion des signaux :
‚îú‚îÄ‚îÄ SIGSEGV : [Arr√™ter] (Segmentation fault)
‚îú‚îÄ‚îÄ SIGFPE : [Arr√™ter] (Erreur arithm√©tique)
‚îú‚îÄ‚îÄ SIGILL : [Arr√™ter] (Instruction ill√©gale)
‚îú‚îÄ‚îÄ SIGPIPE : [Ignorer] (Pipe bris√©)
‚îú‚îÄ‚îÄ SIGINT : [Passer] (Ctrl+C)
‚îú‚îÄ‚îÄ SIGUSR1 : [Ignorer] (User signal 1)
‚îî‚îÄ‚îÄ SIGUSR2 : [Ignorer] (User signal 2)
```

#### Configuration sp√©cifique Linux

```
Options Linux :
‚îú‚îÄ‚îÄ ‚òë Utiliser tty s√©par√© pour le programme
‚îú‚îÄ‚îÄ Terminal : [/usr/bin/gnome-terminal]
‚îÇ   Alternatives :
‚îÇ   ‚îú‚îÄ‚îÄ xterm
‚îÇ   ‚îú‚îÄ‚îÄ konsole (KDE)
‚îÇ   ‚îî‚îÄ‚îÄ xfce4-terminal (XFCE)
‚îú‚îÄ‚îÄ ‚òë Redirection I/O
‚îî‚îÄ‚îÄ ‚òê Disable ASLR (Address Space Layout Randomization)
```

### Terminal pour les applications console

Ubuntu n√©cessite un terminal pour les applications console :

#### Configurer le terminal par d√©faut

```bash
# V√©rifier les terminaux install√©s
ls /usr/bin/*terminal*

# Installer si n√©cessaire
sudo apt install gnome-terminal  # GNOME (d√©faut Ubuntu)
# ou
sudo apt install konsole         # KDE
# ou
sudo apt install xfce4-terminal  # XFCE
# ou
sudo apt install xterm          # Minimaliste
```

#### Configuration dans Lazarus

**Projet ‚Üí Options ‚Üí Options de compilation ‚Üí Config et Cible :**

```
Ex√©cution du d√©bogueur :
‚îú‚îÄ‚îÄ ‚òë Utiliser un terminal de lancement
‚îú‚îÄ‚îÄ Application terminal : [gnome-terminal]
‚îî‚îÄ‚îÄ Param√®tres : [--disable-factory -t $(title) -e]
```

## Configuration avanc√©e

### Symboles de d√©bogage syst√®me

Pour d√©boguer dans les biblioth√®ques syst√®me :

```bash
# Installer les symboles de d√©bogage
sudo apt install libc6-dbg

# Pour GTK (applications graphiques)
sudo apt install libgtk-3-0-dbg libglib2.0-0-dbg

# Pour Qt
sudo apt install libqt5core5a-dbgsym

# Activer les d√©p√¥ts de symboles de d√©bogage
echo "deb http://ddebs.ubuntu.com $(lsb_release -cs) main restricted universe multiverse" | \
  sudo tee /etc/apt/sources.list.d/ddebs.list

# Importer la cl√©
sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 428D7C01

sudo apt update
```

### Configuration GDB personnalis√©e

#### Fichier .gdbinit global

Cr√©ez ou √©ditez `~/.gdbinit` :

```bash
nano ~/.gdbinit
```

Contenu recommand√© :
```gdb
# Configuration GDB pour Lazarus/FreePascal
set print pretty on
set print array on
set print array-indexes on
set print demangle on
set print asm-demangle on
set print object on
set print static-members on
set print vtbl on

# Historique
set history save on
set history size 10000
set history filename ~/.gdb_history

# S√©curit√©
set auto-load safe-path /

# Pagination
set pagination off

# Encodage
set charset UTF-8

# Directories sources
directory ~/projects

# Alias utiles
define cls
  shell clear
end

# Afficher string Pascal
define pstr
  print (char*)($arg0+1)@byte[$arg0[0]]
end
```

#### Fichier .gdbinit par projet

Dans le dossier de votre projet :

```gdb
# .gdbinit local au projet
set environment LD_LIBRARY_PATH ./lib:$LD_LIBRARY_PATH
set substitute-path /build/source /home/user/projects/source

# Points d'arr√™t automatiques
break main
break EAccessViolation

# Commandes au d√©marrage
define hookpost-run
  echo Programme d√©marr√©\n
end
```

**‚ö†Ô∏è S√©curit√©** : GDB demande confirmation pour les .gdbinit locaux :
```bash
# Pour autoriser automatiquement
echo "set auto-load safe-path /" >> ~/.gdbinit
```

### D√©bogage multi-thread

Configuration pour applications multi-thread :

```
Options Lazarus :
‚îú‚îÄ‚îÄ D√©bogueur ‚Üí Threads
‚îÇ   ‚îú‚îÄ‚îÄ ‚òë Afficher la fen√™tre threads
‚îÇ   ‚îî‚îÄ‚îÄ ‚òë Surveiller tous les threads
```

Configuration GDB pour threads :
```gdb
# Dans .gdbinit
set scheduler-locking step
set non-stop on
set target-async on
set print thread-events on
```

### D√©bogage √† distance

Pour d√©boguer sur une autre machine ou embarqu√© :

#### Sur la machine cible

```bash
# Installer gdbserver
sudo apt install gdbserver

# Lancer gdbserver
gdbserver :2345 ./mon_programme
# ou attacher √† un processus existant
gdbserver :2345 --attach $(pidof mon_programme)
```

#### Dans Lazarus (machine de d√©veloppement)

```
D√©bogueur ‚Üí Options ‚Üí Remote
‚îú‚îÄ‚îÄ ‚òë Remote debugging
‚îú‚îÄ‚îÄ Host : [192.168.1.100]
‚îú‚îÄ‚îÄ Port : [2345]
‚îî‚îÄ‚îÄ Remote path mappings : [/home/remote -> /home/local]
```

## Outils compl√©mentaires Ubuntu

### Valgrind - D√©tection de fuites m√©moire

Installation et utilisation :

```bash
# Installation
sudo apt install valgrind

# Utilisation basique
valgrind ./mon_programme

# Avec toutes les v√©rifications
valgrind --leak-check=full --show-leak-kinds=all \
         --track-origins=yes --verbose \
         ./mon_programme
```

Int√©gration dans Lazarus :
```
Ex√©cuter ‚Üí Param√®tres d'ex√©cution
‚îú‚îÄ‚îÄ Utiliser un d√©bogueur : [Valgrind]
‚îî‚îÄ‚îÄ Param√®tres : [--leak-check=full]
```

### DDD - Interface graphique pour GDB

```bash
# Installation
sudo apt install ddd

# Lancer avec votre programme
ddd ./mon_programme

# Ou attacher √† Lazarus
ddd --debugger /usr/bin/gdb
```

### GDBtui - Interface texte am√©lior√©e

GDB inclut une interface TUI (Text User Interface) :

```bash
# Lancer GDB en mode TUI
gdb -tui ./mon_programme

# Ou activer/d√©sactiver dans GDB
(gdb) tui enable
(gdb) tui disable

# Raccourcis TUI
Ctrl+X A : Activer/D√©sactiver TUI
Ctrl+X 2 : Diviser l'√©cran
Ctrl+X O : Changer de fen√™tre active
```

### SystemTap - D√©bogage syst√®me avanc√©

Pour le d√©bogage syst√®me profond :

```bash
# Installation
sudo apt install systemtap systemtap-sdt-dev

# Exemple de script
sudo stap -e 'probe process("mon_programme").function("*") {
  println(probefunc())
}'
```

## Optimisation des performances

### Configuration pour gros projets

#### Limites syst√®me

```bash
# V√©rifier les limites actuelles
ulimit -a

# Augmenter les limites dans /etc/security/limits.conf
sudo nano /etc/security/limits.conf

# Ajouter :
* soft nofile 65536
* hard nofile 65536
* soft nproc 32768
* hard nproc 32768
```

#### Cache de symboles GDB

```bash
# Cr√©er un cache de symboles
mkdir -p ~/.cache/gdb

# Dans ~/.gdbinit
set index-cache on
set index-cache directory ~/.cache/gdb
```

### Pr√©compilation des symboles

Pour acc√©l√©rer le chargement :

```bash
# G√©n√©rer l'index des symboles
gdb-add-index ./mon_programme

# V√©rifier
readelf -S ./mon_programme | grep gdb_index
```

## D√©bogage de probl√®mes sp√©cifiques Linux

### Segmentation Fault

Configuration pour capturer les segfaults :

```bash
# Activer les core dumps
ulimit -c unlimited

# Lancer le programme
./mon_programme

# Si crash, analyser le core
gdb ./mon_programme core

# Dans GDB
(gdb) bt full        # Backtrace compl√®te
(gdb) info registers # √âtat des registres
(gdb) info frame     # Frame actuelle
```

### Probl√®mes de permissions

```bash
# D√©boguer avec sudo (attention!)
sudo gdb ./mon_programme

# Ou mieux, ajouter l'utilisateur au groupe
sudo usermod -a -G dialout $USER  # Pour ports s√©rie
sudo usermod -a -G gpio $USER     # Pour GPIO (Raspberry)
# D√©connexion/reconnexion requise
```

### Biblioth√®ques manquantes

```bash
# V√©rifier les d√©pendances
ldd ./mon_programme

# Trouver les biblioth√®ques manquantes
ldd ./mon_programme | grep "not found"

# D√©finir le chemin des biblioth√®ques
export LD_LIBRARY_PATH=/chemin/vers/libs:$LD_LIBRARY_PATH

# Ou dans Lazarus
Projet ‚Üí Options ‚Üí Chemins
‚îî‚îÄ‚îÄ Biblioth√®ques : -Fl/chemin/vers/libs
```

## Scripts d'automatisation

### Script de d√©bogage

Cr√©ez `debug.sh` :

```bash
#!/bin/bash

# Configuration
PROJECT_NAME="MonProjet"
BUILD_MODE="Debug"
GDB_COMMANDS="gdb_commands.txt"

# Couleurs pour l'affichage
RED='\033[0;31m'
GREEN='\033[0;32m'
NC='\033[0m' # No Color

echo -e "${GREEN}=== Compilation en mode Debug ===${NC}"

# Compilation avec Lazarus
lazbuild --build-mode=$BUILD_MODE $PROJECT_NAME.lpi

if [ $? -eq 0 ]; then
    echo -e "${GREEN}Compilation r√©ussie!${NC}"

    # Cr√©er les commandes GDB
    cat > $GDB_COMMANDS << EOF
break main
run
bt
continue
EOF

    # Lancer GDB
    echo -e "${GREEN}Lancement de GDB...${NC}"
    gdb -x $GDB_COMMANDS ./$PROJECT_NAME

    # Nettoyer
    rm -f $GDB_COMMANDS
else
    echo -e "${RED}Erreur de compilation!${NC}"
    exit 1
fi
```

Rendre ex√©cutable :
```bash
chmod +x debug.sh
./debug.sh
```

### Script de test m√©moire

Cr√©ez `check_memory.sh` :

```bash
#!/bin/bash

PROJECT="$1"

if [ -z "$1" ]; then
    echo "Usage: $0 <programme>"
    exit 1
fi

echo "=== Test de fuites m√©moire avec Valgrind ==="
valgrind --leak-check=full \
         --show-leak-kinds=all \
         --track-origins=yes \
         --log-file=valgrind.log \
         ./$PROJECT

echo "=== R√©sum√© ==="
grep "definitely lost\|indirectly lost\|possibly lost" valgrind.log

echo "Rapport complet dans valgrind.log"
```

## Configuration par type de projet

### Application GUI (GTK/Qt)

```bash
# Installer les symboles de d√©bogage GUI
sudo apt install libgtk-3-0-dbg libqt5core5a-dbgsym

# Dans Lazarus
Projet ‚Üí Options
‚îú‚îÄ‚îÄ D√©bogueur
‚îÇ   ‚îú‚îÄ‚îÄ ‚òë Utiliser terminal externe : Non
‚îÇ   ‚îî‚îÄ‚îÄ ‚òë Rediriger sortie console
```

### Application console

```bash
# Configuration terminal
Projet ‚Üí Options
‚îú‚îÄ‚îÄ D√©bogueur
‚îÇ   ‚îú‚îÄ‚îÄ ‚òë Utiliser terminal externe : Oui
‚îÇ   ‚îú‚îÄ‚îÄ Terminal : gnome-terminal
‚îÇ   ‚îî‚îÄ‚îÄ Arguments : --wait -e
```

### Service/Daemon

```bash
# Pour d√©boguer un service systemd
# 1. Arr√™ter le service
sudo systemctl stop mon-service

# 2. Lancer manuellement avec GDB
sudo gdb /usr/local/bin/mon-service

# 3. Dans GDB
(gdb) set follow-fork-mode child
(gdb) run --debug
```

## Int√©gration avec l'IDE

### Raccourcis clavier Ubuntu

Les raccourcis dans Lazarus sous Ubuntu :

| Raccourci | Action | Note |
|-----------|--------|------|
| **F5** | Ajouter/Retirer breakpoint | Standard |
| **F7** | Step into | Entre dans les fonctions |
| **F8** | Step over | Ligne suivante |
| **F9** | Run/Continue | Lancer ou continuer |
| **Ctrl+F2** | Stop | Arr√™ter le d√©bogage |
| **Ctrl+F7** | Evaluate/Modify | √âvaluer expression |
| **Ctrl+Alt+W** | Watches | Fen√™tre watches |
| **Ctrl+Alt+S** | Call Stack | Pile d'appels |
| **Ctrl+Alt+L** | Local Variables | Variables locales |
| **Ctrl+Alt+B** | Breakpoints | Liste des breakpoints |

### Fen√™tres de d√©bogage

Organisation recommand√©e pour Ubuntu :

```
# Si vous avez plusieurs moniteurs
Monitor 1 : √âditeur de code
Monitor 2 : Fen√™tres de d√©bogage

# Sur un seul moniteur (1920x1080)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ     √âditeur de code         ‚îÇ   Variables  ‚îÇ
‚îÇ         (60%)               ‚îÇ   Watches    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§     (40%)    ‚îÇ
‚îÇ  Terminal / Console Output  ‚îÇ              ‚îÇ
‚îÇ         (20%)               ‚îÇ  Call Stack  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## R√©solution de probl√®mes courants

### GDB tr√®s lent au d√©marrage

**Causes possibles :**
1. Trop de symboles de d√©bogage
2. Biblioth√®ques syst√®me avec symboles

**Solutions :**
```bash
# D√©sactiver le chargement automatique des symboles
echo "set auto-solib-add off" >> ~/.gdbinit

# Ou charger s√©lectivement
(gdb) sharedlibrary libc
```

### "No debugging symbols found"

**Solution :**
```bash
# V√©rifier la compilation
file ./mon_programme
# Doit montrer : "not stripped"

# Si stripped, recompiler avec
lazbuild --build-mode=Debug projet.lpi

# V√©rifier les flags
grep -r "\-g" projet.lpi
```

### Impossible d'attacher au processus

**Erreur :** "ptrace: Operation not permitted"

**Solutions :**
```bash
# Solution 1 : D√©sactiver ptrace_scope
echo 0 | sudo tee /proc/sys/kernel/yama/ptrace_scope

# Solution 2 : Utiliser sudo
sudo gdb -p $(pidof mon_programme)

# Solution 3 : Capabilities
sudo setcap cap_sys_ptrace+ep /usr/bin/gdb
```

### Terminal qui ne s'ouvre pas

**V√©rifier :**
```bash
# Le terminal est install√©
which gnome-terminal

# Les permissions
ls -l /usr/bin/gnome-terminal

# Tester manuellement
gnome-terminal -e "echo test"
```

## Checklist de validation

Avant de d√©boguer, v√©rifiez :

```
‚òê GDB est install√© (gdb --version)
‚òê Version >= 8.0 recommand√©e
‚òê ptrace_scope configur√© si n√©cessaire
‚òê Symboles de debug activ√©s dans le projet (-g)
‚òê Mode de build = Debug
‚òê Terminal configur√© pour apps console
‚òê Permissions suffisantes
‚òê Core dumps activ√©s si n√©cessaire
‚òê .gdbinit configur√©
‚òê Limites syst√®me ad√©quates (ulimit)
```

## Test final de configuration

### Programme de test complet

```pascal
program TestGDBUbuntu;
{$mode objfpc}{$H+}

uses
  {$IFDEF UNIX}
  cthreads,
  {$ENDIF}
  Classes, SysUtils;

type
  TTestThread = class(TThread)
  protected
    procedure Execute; override;
  end;

procedure TTestThread.Execute;
var
  i: Integer;
begin
  for i := 1 to 5 do
  begin
    WriteLn('Thread: ', i);
    Sleep(1000);
  end;
end;

var
  Thread: TTestThread;
  List: TStringList;
  i: Integer;

begin
  WriteLn('Test GDB Ubuntu - D√©but');

  // Test basique
  for i := 1 to 3 do
    WriteLn('Iteration: ', i);  // Breakpoint ici

  // Test thread
  Thread := TTestThread.Create(False);
  Thread.WaitFor;
  Thread.Free;

  // Test objets
  List := TStringList.Create;
  try
    List.Add('Test');
    WriteLn('Count: ', List.Count);
  finally
    List.Free;
  end;

  WriteLn('Test termin√© - Appuyez sur Entr√©e');
  ReadLn;
end.
```

Si vous pouvez :
- ‚úÖ Mettre un breakpoint et l'atteindre
- ‚úÖ Voir les variables locales
- ‚úÖ Suivre l'ex√©cution du thread
- ‚úÖ Inspecter l'objet List

‚Üí **F√©licitations !** Votre configuration GDB sur Ubuntu est parfaite ! üéâ

## Conclusion

GDB sur Ubuntu offre une exp√©rience de d√©bogage native et puissante. La configuration est g√©n√©ralement simple, et les outils compl√©mentaires Linux (Valgrind, strace, etc.) enrichissent consid√©rablement les possibilit√©s de d√©bogage.

**Points cl√©s √† retenir :**
- üì¶ Installation simple via APT
- üîß Configuration minimale requise
- üöÄ Performance native optimale
- üõ†Ô∏è Outils compl√©mentaires puissants
- üìù Scripts bash pour automatisation
- üîí Attention aux restrictions de s√©curit√© (ptrace_scope)

L'avantage d'Ubuntu est l'int√©gration naturelle de GDB dans l'√©cosyst√®me Linux, permettant un d√©bogage efficace avec peu de configuration. Les d√©veloppeurs peuvent se concentrer sur leur code plut√¥t que sur la configuration de l'environnement.

Dans la section suivante (2.5.3), nous explorerons les alternatives √† GDB comme FpDebug et LLDB, qui offrent des approches diff√©rentes et parfois plus modernes du d√©bogage.

‚è≠Ô∏è
